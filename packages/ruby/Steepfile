# frozen_string_literal: true

# Steep configuration for Kreuzberg Ruby package

target :lib do
  signature "sig"

  check "lib"

  # Core library
  library "pathname"
  library "json"
  library "open3"
  library "fileutils"

  # Strategic ignores for files with steep limitations but no actual bugs
  # These files work correctly but steep has difficulty with certain Ruby patterns

  # Struct.new with keyword_init - steep limitation
  ignore "lib/kreuzberg/result.rb"

  # module_function pattern - steep doesn't handle private class methods well
  ignore "lib/kreuzberg/setup_lib_path.rb"
  ignore "lib/kreuzberg/cli.rb"
  ignore "lib/kreuzberg/cli_proxy.rb"
  ignore "lib/kreuzberg/api_proxy.rb"
  ignore "lib/kreuzberg/mcp_proxy.rb"

  # Module prepending with native method calls
  ignore "lib/kreuzberg/cache_api.rb"
  ignore "lib/kreuzberg/extraction_api.rb"

  # Generic type parameters - steep limitation with generics
  ignore "lib/kreuzberg/config.rb"

  # Ignore Rust extension methods (defined in native code)
  ignore "ext"

  # Ignore vendored code
  ignore "vendor"

  # Ignore test files
  ignore "spec"

  # Ignore examples
  ignore "examples"
end
